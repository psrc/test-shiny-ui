# new code ----

data_colnames <- c("share" = "prop",
                   "share_moe" = "prop_moe",
                   "estimate" = "est",
                   "estimate_moe" = "est_moe",
                   'sample_count' = 'count')

# visual selection to data colname
dtype_choice <- c("Share" ="share",
                  "Total" = "estimate",
                  
                  "Margin of Error (Share)" = "share_moe", # DT
                  "Margin of Error (Total)" = "estimate_moe", # DT
                  
                  "Share with Margin of Error" = "share_moe", # plot
                  "Total with Margin of Error" = "estimate_moe", # plot
                  
                  "Sample Count" = "sample_count",
                  
                  "Median" = "median",
                  "Median with Margin of Error" = "median_moe")

# change to named indices
dtype_choice_tbl <- dtype_choice[c(1:4, 7)]
dtype_choice_vis <- dtype_choice[c(1:2, 5:7)]



# legacy code ----

hhts.datasets <- c('2017/2019','2021')

missing_codes <- c('Missing: Technical Error', 'Missing: Non-response', 'Missing: Skip logic', 'Missing: Skip Logic', 'Children or missing')

dbtable.household <- "h"
dbtable.person <- "p"
dbtable.trip <- "t"

dbtable.variables <- "[HHSurvey.variable_metadata]"
dbtable.values <- "[HHSurvey.v_value_metadata]"

table_names <- list("Household" = list("table_name"=dbtable.household),
                    "Person" = list("table_name"=dbtable.person),
                    "Trip" = list("table_name" = dbtable.trip))
z <- 1.645 # 90% CI

## Read from db
variables.lu <- read.dt(dbtable.variables, 'table_name')
variables.lu <- na.omit(variables.lu[, !"levels"])
variables.lu <- variables.lu[order(category_order, variable_name)]

values.lu <- read.dt(dbtable.values, 'table_name')
values.lu<- values.lu[order(value_order)]

vars.cat <- unique(variables.lu$category)

# master list
dtype.choice <- c("Share" ="share",
                  "Total" = "estimate",
                  "Margin of Error (Total)" = "estMOE",
                  "Total with Margin of Error" = "estimate_with_MOE",
                  "Share with Margin of Error" = "share_with_MOE",
                  "Margin of Error (Share)" = "MOE",
                  "Sample Count" = "sample_count",
                  "Median" = "median",
                  "Median with Margin of Error" = "median_with_MOE")

# xtab sublist: dimensions
dtype.choice.xtab <- dtype.choice[c(1:2, 5, 4, 7)]
col.headers <- c("sample_count", "estimate", "estMOE", "share", "MOE")

# xtab sublist: facts
dtype.choice.xtab.facts <- dtype.choice[c(9, 8, 7)]
col.headers.facts <-  c("median", "MOE", "sample_count")


# stab sublist
# change to named indices
dtype.choice.stab <- dtype.choice[c(1:2, 6, 3,7)]
dtype.choice.stab.vis <- dtype.choice[c(1:2, 5, 4,7)]

min_float <- 0
max_float <- 200
hist_breaks<- c(0,1,3,5,10,20,30,45,60,180)
hist_breaks_labels<-c('0 to 1', '1 to 3', '3 to 5', '5 to 10', '10 to 20', '20 to 30', '30 to 45', '45 to 60', '60 to 180')
hist_breaks_num_trips<-c(-.01,0,2,4,6,8,10,12,14,16,18,20,100)
hist_breaks_num_trips_labels<-c('0', '1-2', '3-4', '5-6', '7-8', '9-10', '11-12', '13-14', '14-16', '17-18', '19-20', '20-100')

# photo list
psrc_photos <- c('bellevuetransitcenter.jpg',
                 'canyon_road.png',
                 'linkbeaconhillstn.jpg',
                 'mtrainierparadisehikers.jpeg',
                 'redmond-housing_0.jpg',
                 'st_northgate_trim.png',
                 'street-intersection.jpeg',
                 'transitorienteddevelopment.jpeg')